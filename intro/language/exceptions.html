

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.2.8. Manejo de excepciones en Python &mdash; Scipy lecture notes</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2013.2 beta (euroscipy 2013)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="Scipy lecture notes" href="../../index.html" />
    <link rel="up" title="1.2. El lenguaje Python" href="python_language.html" />
    <link rel="next" title="1.2.9. Programación Orientada a Objetos (POO)" href="oop.html" />
    <link rel="prev" title="1.2.7. Biblioteca estándar" href="standard_library.html" /> 
  </head>
  <body>
   <!-- Use the header to add javascript -->
    
    <script type="text/javascript">
    // Function to collapse the tip divs
    function collapse_tip_div(obj){
	// Update the representation on the tip div based on whether it
	// has the 'collapsed' css class or not: we only want to
	// collapse divs that are not already collapsed
	if($(obj).hasClass("collapsed")) {
	} else {
	    $(obj).find("p.summary").remove();
	    var content = $(obj).text();
	    var html = $(obj).html();

	    if(content.length > 40) {
		if ($.browser.msie) {
		    // We start at '3' to avoid 'tip', as IE
		    // does not count whitespace
		    var content = content.substr(3, 50);
		} else {
		    // We start at '5' to avoid 'tip '
		    var content = content.substr(5, 50);
		}
	    }
	    $(obj).html('<p class="summary"><img src="../../_static/plus.png">' + content + '...</p>' + html);
	}
    }
    </script>

    <script type="text/javascript">
    $(function () {
	$(".tip")
	    .click(function(event){
		$(this).toggleClass("collapsed");
		// Change state of the global button
		$('div.related li.transparent').removeClass('transparent')
		$(this).find("p.summary").remove();
		if($(this).hasClass("collapsed")) {
		    var content = $(this).text();
		    var html = $(this).html();
    
		    if(content.length > 40) {
			if ($.browser.msie) {
			    // We start at '3' to avoid 'tip', as IE
			    // does not count whitespace
			    var content = content.substr(3, 50);
			} else {
			    // We start at '5' to avoid 'tip '
			    var content = content.substr(5, 50);
			}
		    }
		    $(this).html('<p class="summary"><img src="../../_static/plus.png">' + content + '...</p>' + html);
		}
		if (event.target.tagName.toLowerCase() != "a") {
                   return true; //Makes links clickable
		}
	});
    });
    </script>


    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="oop.html" title="1.2.9. Programación Orientada a Objetos (POO)"
             accesskey="N">siguiente</a></li>
        <li class="right" >
          <a href="standard_library.html" title="1.2.7. Biblioteca estándar"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">Scipy lecture notes</a> &raquo;</li>
          <li><a href="../index.html" >1. Iniciandose en computación científica con Python</a> &raquo;</li>
          <li><a href="python_language.html" accesskey="U">1.2. El lenguaje Python</a> &raquo;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="../../_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="manejo-de-excepciones-en-python">
<h1>1.2.8. Manejo de excepciones en Python<a class="headerlink" href="#manejo-de-excepciones-en-python" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Es muy poco probable que se hayan producido excepciones si tiene escrito todos los comandos anteriores del tutorial. Por ejemplo, es posible que se haya producido una excepción si introdujo un comando con un error tipográfico.</p>
<p>Las excepciones se producen por diferentes tipos de errores que surgen al ejecutar código Python. En su propio código, también puede detectar errores o definir tipos personalizados de errores. Es posible que desee ver las descripciones en <a class="reference external" href="http://docs.python.org/2/library/exceptions.html">the built-in Exceptions</a>.</p>
<div class="section" id="excepciones">
<h2>1.2.8.1. Excepciones<a class="headerlink" href="#excepciones" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Excepciones producidas por errores en Python:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
<div class="newline"></div><span class="go">---------------------------------------------------------------------------</span>
<div class="newline"></div><span class="go">ZeroDivisionError: integer division or modulo by zero</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [2]: </span><span class="mi">1</span> <span class="o">+</span> <span class="s">&#39;e&#39;</span>
<div class="newline"></div><span class="go">---------------------------------------------------------------------------</span>
<div class="newline"></div><span class="go">TypeError: unsupported operand type(s) for +: &#39;int&#39; and &#39;str&#39;</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [3]: </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [4]: </span><span class="n">d</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<div class="newline"></div><span class="go">---------------------------------------------------------------------------</span>
<div class="newline"></div><span class="go">KeyError: 3</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [5]: </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [6]: </span><span class="n">l</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<div class="newline"></div><span class="go">---------------------------------------------------------------------------</span>
<div class="newline"></div><span class="go">IndexError: list index out of range</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [7]: </span><span class="n">l</span><span class="o">.</span><span class="n">foobar</span>
<div class="newline"></div><span class="go">---------------------------------------------------------------------------</span>
<div class="newline"></div><span class="go">AttributeError: &#39;list&#39; object has no attribute &#39;foobar&#39;</span>
<div class="newline"></div></pre></div>
</div>
<p>Como puede ver, hay <strong>diferentes tipos</strong> de excepciones para diferentes errores.</p>
</div>
<div class="section" id="atrapando-excepciones">
<h2>1.2.8.2. Atrapando excepciones<a class="headerlink" href="#atrapando-excepciones" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="try-except">
<h3>1.2.8.2.1. try/except<a class="headerlink" href="#try-except" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [8]: </span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ...:</span>     <span class="k">try</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ...:</span>         <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;Digite un numero: &#39;</span><span class="p">))</span>
<div class="newline"></div><span class="gp">   ...:</span>         <span class="k">break</span>
<div class="newline"></div><span class="gp">   ...:</span>     <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ...:</span>         <span class="k">print</span><span class="p">(</span><span class="s">&#39;No es un numero valido.  Pruebe de nuevo...&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="gp">   ...:</span>
<div class="newline"></div><span class="go">Digite un numero: a</span>
<div class="newline"></div><span class="go">No es un numero valido.  Pruebe de nuevo...</span>
<div class="newline"></div><span class="go">Digite un numero: 1</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [9]: </span><span class="n">x</span>
<div class="newline"></div><span class="gr">Out[9]: </span><span class="mi">1</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="section" id="try-finally">
<h3>1.2.8.2.2. try/finally<a class="headerlink" href="#try-finally" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [10]: </span><span class="k">try</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;Digite un numero: &#39;</span><span class="p">))</span>
<div class="newline"></div><span class="gp">   ....:</span> <span class="k">finally</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">print</span><span class="p">(</span><span class="s">&#39;Gracias&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="gp">   ....:</span>
<div class="newline"></div><span class="go">Digite un numero: a</span>
<div class="newline"></div><span class="go">Gracias</span>
<div class="newline"></div>
<div class="newline"></div><span class="go">---------------------------------------------------------------------------</span>
<div class="newline"></div><span class="go">ValueError: invalid literal for int() with base 10: &#39;a&#39;</span>
<div class="newline"></div></pre></div>
</div>
<p>Importante para gestión de recursos (por ejemplo, cerrar un archivo)</p>
</div>
<div class="section" id="es-mas-facil-pedir-perdon-que-permiso">
<h3>1.2.8.2.3. Es más fácil pedir perdón que permiso<a class="headerlink" href="#es-mas-facil-pedir-perdon-que-permiso" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [11]: </span><span class="k">def</span> <span class="nf">imprime_ordenado</span><span class="p">(</span><span class="n">coleccion</span><span class="p">):</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">try</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="n">coleccion</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="k">pass</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">print</span> <span class="n">coleccion</span>
<div class="newline"></div><span class="gp">   ....:</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [12]: </span><span class="n">imprime_ordenado</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="go">[1, 2, 3]</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [13]: </span><span class="n">imprime_ordenado</span><span class="p">(</span><span class="nb">set</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
<div class="newline"></div><span class="go">set([1, 2, 3])</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [14]: </span><span class="n">imprime_ordenado</span><span class="p">(</span><span class="s">&#39;132&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">132</span>
<div class="newline"></div></pre></div>
</div>
</div>
</div>
<div class="section" id="agregando-excepciones">
<h2>1.2.8.3. Agregando excepciones<a class="headerlink" href="#agregando-excepciones" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p class="first">Capturando y agregando una excepción:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [15]: </span><span class="k">def</span> <span class="nf">filtro_nombre</span><span class="p">(</span><span class="n">nombre</span><span class="p">):</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">try</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="n">nombre</span> <span class="o">=</span> <span class="n">nombre</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&#39;ascii&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">except</span> <span class="ne">UnicodeError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="k">if</span> <span class="n">nombre</span> <span class="o">==</span> <span class="s">&#39;Gaël&#39;</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>             <span class="k">print</span><span class="p">(</span><span class="s">&#39;OK, Gaël&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="k">else</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>             <span class="k">raise</span> <span class="n">e</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">return</span> <span class="n">nombre</span>
<div class="newline"></div><span class="gp">   ....:</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [16]: </span><span class="n">filtro_nombre</span><span class="p">(</span><span class="s">&#39;Gaël&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">OK, Gaël</span>
<div class="newline"></div><span class="gr">Out[16]: </span><span class="s">&#39;Ga</span><span class="se">\xc3\xab</span><span class="s">l&#39;</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [17]: </span><span class="n">filtro_nombre</span><span class="p">(</span><span class="s">&#39;Stéfan&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">---------------------------------------------------------------------------</span>
<div class="newline"></div><span class="go">UnicodeDecodeError: &#39;ascii&#39; codec can&#39;t decode byte 0xc3 in position 2: ordinal not in range(128)</span>
<div class="newline"></div></pre></div>
</div>
</li>
<li><p class="first">Excepciones para pasar mensajes entre las partes del código:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [18]: </span><span class="k">def</span> <span class="nf">tendon_de_aquiles</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-3</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="k">raise</span> <span class="ne">StopIteration</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">return</span> <span class="n">x</span>
<div class="newline"></div><span class="gp">   ....:</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [19]: </span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [20]: </span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">try</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="n">x</span> <span class="o">=</span> <span class="n">tendon_de_aquiles</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<div class="newline"></div><span class="gp">   ....:</span>     <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
<div class="newline"></div><span class="gp">   ....:</span>         <span class="k">break</span>
<div class="newline"></div><span class="gp">   ....:</span>
<div class="newline"></div><span class="gp">   ....:</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [21]: </span><span class="n">x</span>
<div class="newline"></div><span class="gr">Out[21]: </span><span class="mf">0.9990234375</span>
<div class="newline"></div></pre></div>
</div>
</li>
</ul>
<p>Utilice excepciones para notificar determinadas condiciones que se cumplen (por ejemplo, StopIteration) o no se cumplen (por ejemplo, agregar errores personalizado)</p>
<p><div style="clear: both"></div></p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="oop.html" title="1.2.9. Programación Orientada a Objetos (POO)"
             >siguiente</a></li>
        <li class="right" >
          <a href="standard_library.html" title="1.2.7. Biblioteca estándar"
             >anterior</a> |</li>
        <li><a href="../../index.html">Scipy lecture notes</a> &raquo;</li>
          <li><a href="../index.html" >1. Iniciandose en computación científica con Python</a> &raquo;</li>
          <li><a href="python_language.html" >1.2. El lenguaje Python</a> &raquo;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="../../_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012,2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>