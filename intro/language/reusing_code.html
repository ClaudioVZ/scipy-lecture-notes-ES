

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.2.5. Reusando código: scripts y módulos &mdash; Scipy lecture notes</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2013.2 beta (euroscipy 2013)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="Scipy lecture notes" href="../../index.html" />
    <link rel="up" title="1.2. El lenguaje Python" href="python_language.html" />
    <link rel="next" title="1.2.6. Entrada y Salida" href="io.html" />
    <link rel="prev" title="1.2.4. Definiendo funciones" href="functions.html" /> 
  </head>
  <body>
   <!-- Use the header to add javascript -->
    
    <script type="text/javascript">
    // Function to collapse the tip divs
    function collapse_tip_div(obj){
	// Update the representation on the tip div based on whether it
	// has the 'collapsed' css class or not: we only want to
	// collapse divs that are not already collapsed
	if($(obj).hasClass("collapsed")) {
	} else {
	    $(obj).find("p.summary").remove();
	    var content = $(obj).text();
	    var html = $(obj).html();

	    if(content.length > 40) {
		if ($.browser.msie) {
		    // We start at '3' to avoid 'tip', as IE
		    // does not count whitespace
		    var content = content.substr(3, 50);
		} else {
		    // We start at '5' to avoid 'tip '
		    var content = content.substr(5, 50);
		}
	    }
	    $(obj).html('<p class="summary"><img src="../../_static/plus.png">' + content + '...</p>' + html);
	}
    }
    </script>

    <script type="text/javascript">
    $(function () {
	$(".tip")
	    .click(function(event){
		$(this).toggleClass("collapsed");
		// Change state of the global button
		$('div.related li.transparent').removeClass('transparent')
		$(this).find("p.summary").remove();
		if($(this).hasClass("collapsed")) {
		    var content = $(this).text();
		    var html = $(this).html();
    
		    if(content.length > 40) {
			if ($.browser.msie) {
			    // We start at '3' to avoid 'tip', as IE
			    // does not count whitespace
			    var content = content.substr(3, 50);
			} else {
			    // We start at '5' to avoid 'tip '
			    var content = content.substr(5, 50);
			}
		    }
		    $(this).html('<p class="summary"><img src="../../_static/plus.png">' + content + '...</p>' + html);
		}
		if (event.target.tagName.toLowerCase() != "a") {
                   return true; //Makes links clickable
		}
	});
    });
    </script>


    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="io.html" title="1.2.6. Entrada y Salida"
             accesskey="N">siguiente</a></li>
        <li class="right" >
          <a href="functions.html" title="1.2.4. Definiendo funciones"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">Scipy lecture notes</a> &raquo;</li>
          <li><a href="../index.html" >1. Para empezar con Python para fines científicos</a> &raquo;</li>
          <li><a href="python_language.html" accesskey="U">1.2. El lenguaje Python</a> &raquo;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="../../_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="reusando-codigo-scripts-y-modulos">
<h1>1.2.5. Reusando código: scripts y módulos<a class="headerlink" href="#reusando-codigo-scripts-y-modulos" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Por ahora, hemos escrito todas las instrucciones en un intérprete. Para un mayor número de instrucciones debemos cambiar de rumbo y escribir código en archivos de texto (utilizando un editor de texto), que vamos a llamar a <em>scripts</em> o <em>módulos</em>. Utilice su editor de texto favorito (siempre que ofrezca un coloreado de sintaxis para Python) o el editor que viene con el con la distribución científica de Python que utiliza (por ejemplo, Scite en Python(x,y)).</p>
<div class="section" id="scripts">
<h2>1.2.5.1. Scripts<a class="headerlink" href="#scripts" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Primero vamos a escribir un <em>script</em>, que es un archivo con una secuencia de instrucciones que se ejecutan cada vez que el script se llama. Las instrucciones pueden ser, por ejemplo copiado y pegado desde el intérprete (pero tenga cuidado con las reglas de indentado!).</p>
</div>
<p>La extensión de los archivos Python son <tt class="docutils literal"><span class="pre">.py</span></tt>. Escriba o copie y pegue las
siguientes líneas en un archivo llamado <tt class="docutils literal"><span class="pre">prueba.py</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">mensaje</span> <span class="o">=</span> <span class="s">&quot;Hola como estas?&quot;</span>
<div class="newline"></div><span class="k">for</span> <span class="n">palabras</span> <span class="ow">in</span> <span class="n">mensaje</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
<div class="newline"></div>    <span class="k">print</span> <span class="n">palabras</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Ahora vamos a ejecutar el script de una forma interactiva, es decir, dentro del intérprete IPython. Este es quizás el uso más común de scripts en cálculo científica.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">en IPython, la sintaxis para ejecutar un script es <tt class="docutils literal"><span class="pre">%run</span> <span class="pre">script.py</span></tt>. Por ejemplo,</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="o">%</span><span class="n">run</span> <span class="n">prueba</span><span class="o">.</span><span class="n">py</span>
<div class="newline"></div><span class="go">Hola</span>
<div class="newline"></div><span class="go">como</span>
<div class="newline"></div><span class="go">estas?</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [2]: </span><span class="n">mensaje</span>
<div class="newline"></div><span class="gr">Out[2]: </span><span class="s">&#39;Hola como estas?&#39;</span>
<div class="newline"></div></pre></div>
</div>
<p>El script ha sido ejecutado. Por otra parte las variables definidas en el script (como <tt class="docutils literal"><span class="pre">mensaje</span></tt>) están disponibles en el intérprete.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Otros intérpretes también ofrecen la posibilidad de ejecutar scripts(por ejemplo, <tt class="docutils literal"><span class="pre">execfile</span></tt> en el intérprete de Python estandar, etc.)</p>
</div>
<p>También es posible ejecutar este script como un <em>programa independiente</em>, mediante la ejecución de la secuencia de comandos en una terminal (Linux/Mac consola o la consola cmd de Windows). Por ejemplo, si estamos en la mismo directorio que el archivo prueba.py, se puede ejecutar esto en una consola:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python prueba.py
<div class="newline"></div>Hola
<div class="newline"></div>como
<div class="newline"></div>estas?
<div class="newline"></div></pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Los scripts independientes también pueden tener argumentos.</p>
<p>En <tt class="docutils literal"><span class="pre">archivo.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<div class="newline"></div><span class="k">print</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
<div class="newline"></div></pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python archivo.py argumento1 argumento2
<div class="newline"></div><span class="o">[</span><span class="s1">&#39;archivo.py&#39;</span>, <span class="s1">&#39;argumento1&#39;</span>, <span class="s1">&#39;argumento2&#39;</span><span class="o">]</span>
<div class="newline"></div></pre></div>
</div>
<div class="last admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">No implemente una opción de parseado usted mismo. Utilice módulos como <tt class="docutils literal"><span class="pre">optparse</span></tt> o <tt class="docutils literal"><span class="pre">argparse</span></tt>.</p>
</div>
</div>
</div>
<div class="section" id="importando-objectos-desde-modulos">
<h2>1.2.5.2. Importando objectos desde módulos<a class="headerlink" href="#importando-objectos-desde-modulos" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">os</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [2]: </span><span class="n">os</span>
<div class="newline"></div><span class="gr">Out[2]: </span><span class="o">&lt;</span><span class="n">module</span> <span class="s">&#39;os&#39;</span> <span class="kn">from</span> <span class="err">&#39;/</span><span class="nn">usr</span><span class="err">/</span><span class="nn">lib</span><span class="err">/</span><span class="nn">python2.7</span><span class="err">/</span><span class="nn">os.pyc</span><span class="err">&#39;&gt;</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [3]: </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">Out[3]:</span>
<div class="newline"></div><span class="go">[&#39;conf.py&#39;,</span>
<div class="newline"></div><span class="go"> &#39;basic_types.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;control_flow.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;functions.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;python_language.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;reusing.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;file_io.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;exceptions.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;workflow.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;index.rst&#39;]</span>
<div class="newline"></div></pre></div>
</div>
<p>O también:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [4]: </span><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">listdir</span>
<div class="newline"></div><span class="gp">In [5]: </span><span class="n">listdir</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">Out[5]:</span>
<div class="newline"></div><span class="go">[&#39;conf.py&#39;,</span>
<div class="newline"></div><span class="go"> &#39;basic_types.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;control_flow.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;functions.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;python_language.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;reusing.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;file_io.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;exceptions.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;workflow.rst&#39;,</span>
<div class="newline"></div><span class="go"> &#39;index.rst&#39;]</span>
<div class="newline"></div></pre></div>
</div>
<p>Importando con abreviaturas:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [6]: </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="o">*</span>
<div class="newline"></div></pre></div>
</div>
<p>Esto se conoce como <em>importar una estrella</em> y por favor, <strong>Debe usarlo con precaución</strong></p>
<blockquote class="last">
<div><ul class="simple">
<li>Hace que el código sea más difícil de leer y entender: de dónde vienen estas variables?</li>
<li>Hace que sea imposible adivinar su funcionalidad por contexto y nombre (pista: <a class="reference external" href="http://docs.python.org/2.7/library/os.html#os.name" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">os.name</span></tt></a> es el nombre del sistema operativo), y utilizar el autocompletado tabulador.</li>
<li>Limita los nombres de las variables que se pueden utilizar: <a class="reference external" href="http://docs.python.org/2.7/library/os.html#os.name" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">os.name</span></tt></a> podría anular <tt class="xref py py-obj docutils literal"><span class="pre">name</span></tt>, o vice-versa.</li>
<li>Crea posibles conflictos de nombres entre módulos.</li>
<li>Hace que el código sea imposible de comprobar estáticamente para variables indefinidas.</li>
</ul>
</div></blockquote>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Los módulos son una buena forma de organizar el código de una manera jerárquica. En realidad, todas las herramientas de cálculo científico que utilizamos son módulos</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span> <span class="c"># arreglos optimizados</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<div class="newline"></div><span class="go">array([  0.,   2.,   4.,   6.,   8.,  10.])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy</span> <span class="c"># cálculo científico</span>
<div class="newline"></div></pre></div>
</div>
</div>
<p>En Python(x,y), Ipython(x,y) estos módulos se importan automaticamente al inicio:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="o">*</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">scipy</span>
<div class="newline"></div></pre></div>
</div>
<p>y no es necesario volver a importar estos módulos.</p>
</div>
<div class="section" id="creando-modulos">
<h2>1.2.5.3. Creando módulos<a class="headerlink" href="#creando-modulos" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">Si queremos escribir programas organizados más grandes y mejores (comparados con scripts simples), donde se definen algunos objetos, (variables, funciones, clases) y queremos volver a utilizar varias veces, tenemos crear nuestros propios <em>módulos</em>.</p>
</div>
<p>Vamos a crear el módulo <tt class="docutils literal"><span class="pre">demo</span></tt> contenido en el archivo <tt class="docutils literal"><span class="pre">demo.py</span></tt>:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="s">&quot;A demo module.&quot;</span>
<div class="newline"></div>
<div class="newline"></div><span class="k">def</span> <span class="nf">print_b</span><span class="p">():</span>
<div class="newline"></div>    <span class="s">&quot;Prints b.&quot;</span>
<div class="newline"></div>    <span class="k">print</span> <span class="s">&#39;b&#39;</span>
<div class="newline"></div>
<div class="newline"></div><span class="k">def</span> <span class="nf">print_a</span><span class="p">():</span>
<div class="newline"></div>    <span class="s">&quot;Prints a.&quot;</span>
<div class="newline"></div>    <span class="k">print</span> <span class="s">&#39;a&#39;</span>
<div class="newline"></div>
<div class="newline"></div>
<div class="newline"></div><span class="n">c</span> <span class="o">=</span> <span class="mi">2</span>
<div class="newline"></div><span class="n">d</span> <span class="o">=</span> <span class="mi">2</span>
<div class="newline"></div></pre></div>
</div>
</div></blockquote>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">En este archivo, definimos dos funciones <tt class="docutils literal"><span class="pre">print_a</span></tt> y <tt class="docutils literal"><span class="pre">print_b</span></tt>. Si queremos llamar a la función <tt class="docutils literal"><span class="pre">print_a</span></tt> desde el intérprete. Podríamos ejecutar el archivo como un script, pero ya que sólo se quiere tener acceso a la función <tt class="docutils literal"><span class="pre">print_a</span></tt>, es mejor <strong>importarlo como un módulo</strong>.
La sintaxis es la siguiente.</p>
</div>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">demo</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [2]: </span><span class="n">demo</span><span class="o">.</span><span class="n">print_a</span><span class="p">()</span>
<div class="newline"></div><span class="go">a</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [3]: </span><span class="n">demo</span><span class="o">.</span><span class="n">print_b</span><span class="p">()</span>
<div class="newline"></div><span class="go">b</span>
<div class="newline"></div></pre></div>
</div>
<p>Importar un módulo permite el acceso a sus objetos, utilizando la sintaxis
<tt class="docutils literal"><span class="pre">módulo.objecto</span></tt>. No se olvide de poner el nombre del módulo antes del nombre del objeto, de lo contrario Python no reconocerá la instrucción.</p>
<p>Introspección</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [4]: </span><span class="n">demo</span><span class="err">?</span>
<div class="newline"></div><span class="go">Type:       module</span>
<div class="newline"></div><span class="go">String Form:&lt;module &#39;demo&#39; from &#39;demo.py&#39;&gt;</span>
<div class="newline"></div><span class="go">File:       /home/varoquau/Projects/Python_talks/scipy_2009_tutorial/source/demo.py</span>
<div class="newline"></div><span class="go">Docstring:  Módulo demo.</span>
<div class="newline"></div>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [5]: </span><span class="n">who</span>
<div class="newline"></div><span class="go">demo</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [6]: </span><span class="n">whos</span>
<div class="newline"></div><span class="go">Variable   Type      Data/Info</span>
<div class="newline"></div><span class="go">------------------------------</span>
<div class="newline"></div><span class="go">demo       module    &lt;module &#39;demo&#39; from &#39;demo.py&#39;&gt;</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [7]: </span><span class="nb">dir</span><span class="p">(</span><span class="n">demo</span><span class="p">)</span>
<div class="newline"></div><span class="go">Out[7]:</span>
<div class="newline"></div><span class="go">[&#39;__builtins__&#39;,</span>
<div class="newline"></div><span class="go">&#39;__doc__&#39;,</span>
<div class="newline"></div><span class="go">&#39;__file__&#39;,</span>
<div class="newline"></div><span class="go">&#39;__name__&#39;,</span>
<div class="newline"></div><span class="go">&#39;__package__&#39;,</span>
<div class="newline"></div><span class="go">&#39;c&#39;,</span>
<div class="newline"></div><span class="go">&#39;d&#39;,</span>
<div class="newline"></div><span class="go">&#39;print_a&#39;,</span>
<div class="newline"></div><span class="go">&#39;print_b&#39;]</span>
<div class="newline"></div>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [8]: </span><span class="n">demo</span><span class="o">.</span>
<div class="newline"></div><span class="go">demo.__builtins__      demo.__init__          demo.__str__</span>
<div class="newline"></div><span class="go">demo.__class__         demo.__name__          demo.__subclasshook__</span>
<div class="newline"></div><span class="go">demo.__delattr__       demo.__new__           demo.c</span>
<div class="newline"></div><span class="go">demo.__dict__          demo.__package__       demo.d</span>
<div class="newline"></div><span class="go">demo.__doc__           demo.__reduce__        demo.print_a</span>
<div class="newline"></div><span class="go">demo.__file__          demo.__reduce_ex__     demo.print_b</span>
<div class="newline"></div><span class="go">demo.__format__        demo.__repr__          demo.py</span>
<div class="newline"></div><span class="go">demo.__getattribute__  demo.__setattr__       demo.pyc</span>
<div class="newline"></div><span class="go">demo.__hash__          demo.__sizeof__</span>
<div class="newline"></div></pre></div>
</div>
<p>Importando objetos a partir de módulos en el espacio de nombres principal</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [9]: </span><span class="kn">from</span> <span class="nn">demo</span> <span class="kn">import</span> <span class="n">print_a</span><span class="p">,</span> <span class="n">print_b</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [10]: </span><span class="n">whos</span>
<div class="newline"></div><span class="go">Variable   Type        Data/Info</span>
<div class="newline"></div><span class="go">--------------------------------</span>
<div class="newline"></div><span class="go">demo       module      &lt;module &#39;demo&#39; from &#39;demo.py&#39;&gt;</span>
<div class="newline"></div><span class="go">print_a    function    &lt;function print_a at 0xb7421534&gt;</span>
<div class="newline"></div><span class="go">print_b    function    &lt;function print_b at 0xb74214c4&gt;</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [11]: </span><span class="n">print_a</span><span class="p">()</span>
<div class="newline"></div><span class="go">a</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p><strong>Módulos almacenados en caché</strong></p>
<blockquote>
<div>Los módulos se almacenan en caché: si modifica <tt class="docutils literal"><span class="pre">demo.py</span></tt> y lo vuelve a importar, obtendrá el módulo antiguo.</div></blockquote>
<p>Solución:</p>
<blockquote class="last">
<div><div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [10]: </span><span class="nb">reload</span><span class="p">(</span><span class="n">demo</span><span class="p">)</span>
<div class="newline"></div><span class="gr">Out[10]: </span><span class="o">&lt;</span><span class="n">module</span> <span class="s">&#39;demo&#39;</span> <span class="kn">from</span> <span class="err">&#39;</span><span class="nn">demo.pyc</span><span class="err">&#39;&gt;</span>
<div class="newline"></div></pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="main-y-cargando-modulos">
<h2>1.2.5.4. &#8216;__main__&#8217; y cargando módulos<a class="headerlink" href="#main-y-cargando-modulos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Archivo <tt class="docutils literal"><span class="pre">demo2.py</span></tt>:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<div class="newline"></div>
<div class="newline"></div><span class="k">def</span> <span class="nf">print_a</span><span class="p">():</span>
<div class="newline"></div>    <span class="s">&quot;Prints a.&quot;</span>
<div class="newline"></div>    <span class="k">print</span> <span class="s">&#39;a&#39;</span>
<div class="newline"></div>
<div class="newline"></div><span class="k">print</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span>
<div class="newline"></div>
<div class="newline"></div><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
<div class="newline"></div>    <span class="n">print_a</span><span class="p">()</span>
<div class="newline"></div></pre></div>
</div>
</div></blockquote>
<p>Importando:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [11]: </span><span class="kn">import</span> <span class="nn">demo2</span>
<div class="newline"></div><span class="go">b</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [12]: </span><span class="kn">import</span> <span class="nn">demo2</span>
<div class="newline"></div></pre></div>
</div>
<p>Ejecutando:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [13]: </span><span class="o">%</span><span class="n">run</span> <span class="n">demo2</span>
<div class="newline"></div><span class="go">b</span>
<div class="newline"></div><span class="go">a</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="section" id="scripts-o-modulos-como-organizar-su-codigo">
<h2>1.2.5.5. Scripts o módulos? Cómo organizar su código<a class="headerlink" href="#scripts-o-modulos-como-organizar-su-codigo" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Regla de oro</p>
<ul class="last simple">
<li>Los conjuntos de instrucciones que se llaman varias veces deben estar escritos dentro de <strong>funciones</strong> para una mejor reutilización del código.</li>
<li>Funciones (u otras partes de código) que se llaman varias veces desde scripts deben ser escritos dentro de un <strong>módulo</strong>, de modo que el módulo es importado en los demás scripts (no copie y pegue sus funciones en los demás scripts!).</li>
</ul>
</div>
<div class="section" id="como-encontrar-modulos-e-importarlos">
<h3>1.2.5.5.1. Cómo encontrar módulos e importarlos<a class="headerlink" href="#como-encontrar-modulos-e-importarlos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cuando se ejecuta <tt class="docutils literal"><span class="pre">import</span> <span class="pre">mimodulo</span></tt>, el módulo <tt class="docutils literal"><span class="pre">mimodulo</span></tt> se busca en una lista de directorios. Esta lista incluye por defecto una lista de la ruta de instalación (por ejemplo, <tt class="docutils literal"><span class="pre">/usr/lib/python</span></tt>) así como la lista de los directorios especificados por la variable de entorno <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt>.</p>
<p>La lista de directorios en los que busca Python viene dada por la variable <tt class="docutils literal"><span class="pre">sys.path</span></tt></p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">sys</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [2]: </span><span class="n">sys</span><span class="o">.</span><span class="n">path</span>
<div class="newline"></div><span class="go">Out[2]:</span>
<div class="newline"></div><span class="go">[&#39;&#39;,</span>
<div class="newline"></div><span class="go"> &#39;/home/varoquau/.local/bin&#39;,</span>
<div class="newline"></div><span class="go"> &#39;/usr/lib/python2.7&#39;,</span>
<div class="newline"></div><span class="go"> &#39;/home/varoquau/.local/lib/python2.7/site-packages&#39;,</span>
<div class="newline"></div><span class="go"> &#39;/usr/lib/python2.7/dist-packages&#39;,</span>
<div class="newline"></div><span class="go"> &#39;/usr/local/lib/python2.7/dist-packages&#39;,</span>
<div class="newline"></div><span class="go"> ...]</span>
<div class="newline"></div></pre></div>
</div>
<p>Los módulos deben estar ubicados en la ruta de búsqueda, por lo tanto, se puede:</p>
<ul>
<li><p class="first">Escribir sus propios módulos dentro de los directorios que ya están definidas en el ruta de búsqueda (por ejemplo, <tt class="docutils literal"><span class="pre">$HOME/.local/lib/python2.7/dist-packages</span></tt>). También puede usar enlaces simbólicos (en Linux) para mantener el código de otro sitio.</p>
</li>
<li><p class="first">Modificar la variable de entorno <tt class="docutils literal"><span class="pre">PYTHONPATH</span></tt> para incluir el directorios que contienen los módulos definidos por el usuario.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>En Linux/Unix, agregue la siguiente línea en un archivo para que sea leido por el shell al inicio (por ejemplo, /etc/profile, . profile)</p>
<div class="highlight-python"><pre>export PYTHONPATH=$PYTHONPATH:/home/emma/user_defined_modules</pre>
</div>
<p class="last">En Windows, <a class="reference external" href="http://support.microsoft.com/kb/310519">http://support.microsoft.com/kb/310519</a> explica cómo manejar las variables de entorno.</p>
</div>
</li>
<li><p class="first">o modifique la variable <tt class="docutils literal"><span class="pre">sys.path</span></tt> con un script Python.</p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<div class="newline"></div><span class="n">nuevo_path</span> <span class="o">=</span> <span class="s">&#39;/home/emma/user_defined_modules&#39;</span>
<div class="newline"></div><span class="k">if</span> <span class="n">nuevo_path</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
<div class="newline"></div>    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nuevo_path</span><span class="p">)</span>
<div class="newline"></div></pre></div>
</div>
<p class="last">Este método no es muy robusto, sin embargo, hace que el código menos portable (la ruta depende del usuario) y porque hay que añadir el directorio a su sys.path cada vez que desee importar un módulo en este directorio.</p>
</div>
</li>
</ul>
<p>Vea <a class="reference external" href="http://docs.python.org/tutorial/modules.html">http://docs.python.org/tutorial/modules.html</a> para más información
acerca de los módulos.</p>
</div>
</div>
<div class="section" id="paquetes">
<h2>1.2.5.6. Paquetes<a class="headerlink" href="#paquetes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Un directorio que contiene muchos módulos se llama un <em>paquete</em>. Un paquete
es un módulo con submódulos (submódulos con submódulos, etc).
Un archivo especial llamado <tt class="docutils literal"><span class="pre">__init__.py</span></tt> (que puede estar vacío) le dice a Python que el directorio es un paquete Python, del cual los módulos pueden ser importados.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ls
<div class="newline"></div>cluster/        io/          README.txt@     stsci/
<div class="newline"></div>__config__.py@  LATEST.txt@  setup.py@       __svn_version__.py@
<div class="newline"></div>__config__.pyc  lib/         setup.pyc       __svn_version__.pyc
<div class="newline"></div>constants/      linalg/      setupscons.py@  THANKS.txt@
<div class="newline"></div>fftpack/        linsolve/    setupscons.pyc  TOCHANGE.txt@
<div class="newline"></div>__init__.py@    maxentropy/  signal/         version.py@
<div class="newline"></div>__init__.pyc    misc/        sparse/         version.pyc
<div class="newline"></div>INSTALL.txt@    ndimage/     spatial/        weave/
<div class="newline"></div>integrate/      odr/         special/
<div class="newline"></div>interpolate/    optimize/    stats/
<div class="newline"></div><span class="nv">$ </span><span class="nb">cd </span>ndimage
<div class="newline"></div><span class="nv">$ </span>ls
<div class="newline"></div>doccer.py@   fourier.pyc   interpolation.py@  morphology.pyc   setup.pyc
<div class="newline"></div>doccer.pyc   info.py@      interpolation.pyc  _nd_image.so
<div class="newline"></div>setupscons.py@
<div class="newline"></div>filters.py@  info.pyc      measurements.py@   _ni_support.py@
<div class="newline"></div>setupscons.pyc
<div class="newline"></div>filters.pyc  __init__.py@  measurements.pyc   _ni_support.pyc  tests/
<div class="newline"></div>fourier.py@  __init__.pyc  morphology.py@     setup.py@
<div class="newline"></div></pre></div>
</div>
<p>Desde Ipython:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="gp">In [1]: </span><span class="kn">import</span> <span class="nn">scipy</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [2]: </span><span class="n">scipy</span><span class="o">.</span><span class="n">__file__</span>
<div class="newline"></div><span class="gr">Out[2]: </span><span class="s">&#39;/usr/lib/python2.7/dist-packages/scipy/__init__.pyc&#39;</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [3]: </span><span class="n">scipy</span><span class="o">.</span><span class="n">__version__</span>
<div class="newline"></div><span class="gr">Out[3]: </span><span class="s">&#39;0.9.0&#39;</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [4]: </span><span class="kn">import</span> <span class="nn">scipy.ndimage.morphology</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [5]: </span><span class="kn">from</span> <span class="nn">scipy.ndimage</span> <span class="kn">import</span> <span class="n">morphology</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">In [6]: </span><span class="n">morphology</span><span class="o">.</span><span class="n">binary_dilation</span><span class="err">?</span>
<div class="newline"></div><span class="go">Type:       function</span>
<div class="newline"></div><span class="go">String Form:&lt;function binary_dilation at 0x9646294&gt;</span>
<div class="newline"></div><span class="go">File:       /usr/lib/python2.7/dist-packages/scipy/ndimage/morphology.py</span>
<div class="newline"></div><span class="go">Definition: morphology.binary_dilation(input, structure=None, iterations=1, mask=None, output=None, border_value=0, origin=0, brute_force=False)</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="section" id="buenas-practicas">
<h2>1.2.5.7. Buenas practicas<a class="headerlink" href="#buenas-practicas" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p class="first">Use <strong>nombres significativos</strong> para los objetos</p>
</li>
<li><p class="first"><strong>Indentado: no es opcional!</strong></p>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>El indentado es obligatorio en Python! Cada bloque de comandos después de un <tt class="docutils literal"><span class="pre">:</span></tt> aumenta un nivel de indentado adicional con respecto a la línea anterior. Como también, después de <tt class="docutils literal"><span class="pre">def</span> <span class="pre">f():</span></tt> o <tt class="docutils literal"><span class="pre">while:</span></tt>. Al final de tales bloques lógicos, se debera disminuir la profundidad de indentado (o aumentar si se introduce un nuevo bloque, etc)</p>
<p>El uso estricto del indentado es el precio a pagar por deshacerse de <tt class="docutils literal"><span class="pre">{</span></tt> or <tt class="docutils literal"><span class="pre">;</span></tt> caracteres que delimitan bloques lógicos en otros lenguajes. La indentación inadecuada produce errores tales como:</p>
<div class="highlight-ipython"><div class="highlight"><pre><span class="go">------------------------------------------------------------</span>
<div class="newline"></div><span class="go">IndentationError: unexpected indent (prueba.py, line 2)</span>
<div class="newline"></div></pre></div>
</div>
<p class="last">El indentado puede ser un poco confuso al principio. Sin embargo, con la una indentación clara, y en ausencia de caracteres extra, el código es muy agradable de leer en comparación con otros lenguajes.</p>
</div>
</li>
<li><p class="first"><strong>Profundidad de indentado</strong>: En un editor de texto, el indentado puede ser cualquier número positivo de espacios (1, 2, 3, 4, ...). Sin embargo, se considera una buena práctica <strong>indentar con 4 espacios</strong>. Usted puede configurar el editor para asignar a la tecla <tt class="docutils literal"><span class="pre">tab</span></tt> un indentado de 4 espacio. En Python(x,y), el editor es ya configurado de esa manera.</p>
</li>
<li><p class="first"><strong>Normas de estilo</strong></p>
<p><strong>Líneas Largas</strong>: no se debe escribir líneas muy largas que se extiendan por más de (por ejemplo) 80 caracteres. Las líneas largas se pueden dividir con el carácter <tt class="docutils literal"><span class="pre">\</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">linea_larga</span> <span class="o">=</span> <span class="s">&quot;Esta una línea muy muy larga </span><span class="se">\</span>
<div class="newline"></div><span class="gp">... </span><span class="s">que se divide en dos partes.&quot;</span>
<div class="newline"></div></pre></div>
</div>
<p><strong>Espacios</strong></p>
<p>Escriba código bien espaciado: ponga espacios en blanco después de las comas, ponga espacios en blanco antes y después de los operadores aritméticos, etc.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="c"># si</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="mi">1</span> <span class="c"># demasiado estrecho</span>
<div class="newline"></div></pre></div>
</div>
<p>Un cierto número de normas para escribir código <tt class="docutils literal"><span class="pre">hermoso</span></tt> (y lo más importante el uso de la misma convención para cualquier persona!) se dan en <a class="reference external" href="http://www.python.org/dev/peps/pep-0008">Style Guide for Python Code</a>.</p>
</li>
</ul>
<p><div style="clear: both"></div></p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="io.html" title="1.2.6. Entrada y Salida"
             >siguiente</a></li>
        <li class="right" >
          <a href="functions.html" title="1.2.4. Definiendo funciones"
             >anterior</a> |</li>
        <li><a href="../../index.html">Scipy lecture notes</a> &raquo;</li>
          <li><a href="../index.html" >1. Para empezar con Python para fines científicos</a> &raquo;</li>
          <li><a href="python_language.html" >1.2. El lenguaje Python</a> &raquo;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="../../_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012,2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>