

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.3.2. Operaciones numéricas con arreglos &mdash; Scipy lecture notes</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2013.2 beta (euroscipy 2013)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copybutton.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="Scipy lecture notes" href="../../index.html" />
    <link rel="up" title="1.3. NumPy: creación y manipulación de datos numéricos" href="index.html" />
    <link rel="next" title="1.3.3. Arreglos más elaborados" href="elaborate_arrays.html" />
    <link rel="prev" title="1.3.1. El objeto array numpy" href="array_object.html" /> 
  </head>
  <body>
   <!-- Use the header to add javascript -->
    
    <script type="text/javascript">
    // Function to collapse the tip divs
    function collapse_tip_div(obj){
	// Update the representation on the tip div based on whether it
	// has the 'collapsed' css class or not: we only want to
	// collapse divs that are not already collapsed
	if($(obj).hasClass("collapsed")) {
	} else {
	    $(obj).find("p.summary").remove();
	    var content = $(obj).text();
	    var html = $(obj).html();

	    if(content.length > 40) {
		if ($.browser.msie) {
		    // We start at '3' to avoid 'tip', as IE
		    // does not count whitespace
		    var content = content.substr(3, 50);
		} else {
		    // We start at '5' to avoid 'tip '
		    var content = content.substr(5, 50);
		}
	    }
	    $(obj).html('<p class="summary"><img src="../../_static/plus.png">' + content + '...</p>' + html);
	}
    }
    </script>

    <script type="text/javascript">
    $(function () {
	$(".tip")
	    .click(function(event){
		$(this).toggleClass("collapsed");
		// Change state of the global button
		$('div.related li.transparent').removeClass('transparent')
		$(this).find("p.summary").remove();
		if($(this).hasClass("collapsed")) {
		    var content = $(this).text();
		    var html = $(this).html();
    
		    if(content.length > 40) {
			if ($.browser.msie) {
			    // We start at '3' to avoid 'tip', as IE
			    // does not count whitespace
			    var content = content.substr(3, 50);
			} else {
			    // We start at '5' to avoid 'tip '
			    var content = content.substr(5, 50);
			}
		    }
		    $(this).html('<p class="summary"><img src="../../_static/plus.png">' + content + '...</p>' + html);
		}
		if (event.target.tagName.toLowerCase() != "a") {
                   return true; //Makes links clickable
		}
	});
    });
    </script>


    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="elaborate_arrays.html" title="1.3.3. Arreglos más elaborados"
             accesskey="N">siguiente</a></li>
        <li class="right" >
          <a href="array_object.html" title="1.3.1. El objeto array numpy"
             accesskey="P">anterior</a> |</li>
        <li><a href="../../index.html">Scipy lecture notes</a> &raquo;</li>
          <li><a href="../index.html" >1. Iniciandose en computación científica con Python</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">1.3. NumPy: creación y manipulación de datos numéricos</a> &raquo;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="../../_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="operaciones-numericas-con-arreglos">
<h1>1.3.2. Operaciones numéricas con arreglos<a class="headerlink" href="#operaciones-numericas-con-arreglos" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="contents local topic" id="contenido">
<p class="topic-title first">Contenido</p>
<ul class="simple">
<li><a class="reference internal" href="#operaciones-elemento-a-elemento" id="id2">Operaciones elemento a elemento</a></li>
<li><a class="reference internal" href="#reducciones-basicas" id="id3">Reducciones básicas</a></li>
<li><a class="reference internal" href="#broadcasting" id="id4">Broadcasting</a></li>
<li><a class="reference internal" href="#manipulando-las-dimensiones-de-un-arreglo" id="id5">Manipulando las dimensiones de un arreglo</a></li>
<li><a class="reference internal" href="#ordenando-datos" id="id6">Ordenando datos</a></li>
<li><a class="reference internal" href="#resumen" id="id7">Resumen</a></li>
</ul>
</div>
<div class="section" id="operaciones-elemento-a-elemento">
<h2><a class="toc-backref" href="#id2">1.3.2.1. Operaciones elemento a elemento</a><a class="headerlink" href="#operaciones-elemento-a-elemento" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Con escalares</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
<div class="newline"></div><span class="go">array([2, 3, 4, 5])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span><span class="o">**</span><span class="n">a</span>
<div class="newline"></div><span class="go">array([ 2,  4,  8, 16])</span>
<div class="newline"></div></pre></div>
</div>
<p>Toda las operaciones aritméticas son elemento a elemento</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
<div class="newline"></div><span class="go">array([-1.,  0.,  1.,  2.])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<div class="newline"></div><span class="go">array([ 2.,  4.,  6.,  8.])</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span><span class="o">**</span><span class="p">(</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="n">j</span>
<div class="newline"></div><span class="go">array([ 2,  3,  6, 13, 28])</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p><strong>Multiplicación de arreglos no es multiplicación matricial:</strong></p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">*</span> <span class="n">c</span>                   <span class="c"># no es multiplicación matricial!</span>
<div class="newline"></div><span class="go">array([[ 1.,  1.,  1.],</span>
<div class="newline"></div><span class="go">       [ 1.,  1.,  1.],</span>
<div class="newline"></div><span class="go">       [ 1.,  1.,  1.]])</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p><strong>Multiplicación matricial:</strong></p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>       <span class="c"># tambien, np.dot(c, c)</span>
<div class="newline"></div><span class="go">array([[ 3.,  3.,  3.],</span>
<div class="newline"></div><span class="go">       [ 3.,  3.,  3.],</span>
<div class="newline"></div><span class="go">       [ 3.,  3.,  3.]])</span>
<div class="newline"></div></pre></div>
</div>
</div>
<p>Comparaciones</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>
<div class="newline"></div><span class="go">array([False,  True, False,  True], dtype=bool)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span>
<div class="newline"></div><span class="go">array([False, False,  True, False], dtype=bool)</span>
<div class="newline"></div></pre></div>
</div>
<p>Operaciones logicas</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">logical_or</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<div class="newline"></div><span class="go">array([ True,  True,  True, False], dtype=bool)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<div class="newline"></div><span class="go">array([ True, False, False, False], dtype=bool)</span>
<div class="newline"></div></pre></div>
</div>
<p>Desajustes de forma</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="gt">Traceback (most recent call last):</span>
<div class="newline"></div>  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<div class="newline"></div><span class="gr">ValueError</span>: <span class="n">operands could not be broadcast together with shapes (4) (2)</span>
<div class="newline"></div></pre></div>
</div>
<p><strong>Broadcasting?</strong> lo veremos <a class="reference internal" href="#broadcasting"><em>despues</em></a>.</p>
<p>Transposición</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span> <span class="mi">1</span><span class="p">)</span>   <span class="c"># ver help(np.triu)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([[ 0.,  1.,  1.],</span>
<div class="newline"></div><span class="go">       [ 0.,  0.,  1.],</span>
<div class="newline"></div><span class="go">       [ 0.,  0.,  0.]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">T</span>   <span class="c"># tambien, a.transpose()</span>
<div class="newline"></div><span class="go">array([[ 0.,  0.,  0.],</span>
<div class="newline"></div><span class="go">       [ 1.,  0.,  0.],</span>
<div class="newline"></div><span class="go">       [ 1.,  1.,  0.]])</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p><strong>Algebra linear</strong></p>
<p class="last">El submódulo <tt class="xref py py-mod docutils literal"><span class="pre">numpy.linalg</span></tt> implementa el álgebra lineal básico, como resolución de sistemas lineales, descomposición en valores singulares, etc. Sin embargo, esto no garantiza que sea compilado utilizando rutinas eficientes, y por lo tanto se recomienda el uso de <a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/linalg.html#scipy.linalg" title="(in SciPy v0.12)"><tt class="xref py py-mod docutils literal"><span class="pre">scipy.linalg</span></tt></a>, como se detalla en la sección <a class="reference internal" href="../scipy.html#scipy-linalg"><em>Operaciones de álgebra lineal: scipy.linalg</em></a></p>
</div>
<div class="green topic">
<p class="topic-title first">Ejercicio</p>
<p>Generar los arreglos <tt class="docutils literal"><span class="pre">[2**0,</span> <span class="pre">2**1,</span> <span class="pre">2**2,</span> <span class="pre">2**3,</span> <span class="pre">2**4]</span></tt> y <tt class="docutils literal"><span class="pre">a_j</span> <span class="pre">=</span> <span class="pre">2^(3*j)</span> <span class="pre">-</span> <span class="pre">j</span></tt></p>
</div>
</div>
<div class="section" id="reducciones-basicas">
<h2><a class="toc-backref" href="#id3">1.3.2.2. Reducciones básicas</a><a class="headerlink" href="#reducciones-basicas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Cálculando sumas</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<div class="newline"></div><span class="go">10</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<div class="newline"></div><span class="go">10</span>
<div class="newline"></div></pre></div>
</div>
<img alt="../../_images/reductions.png" class="align-right" src="../../_images/reductions.png" />
<p>Suma por filas y por columnas</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<div class="newline"></div><span class="go">array([[1, 1],</span>
<div class="newline"></div><span class="go">       [2, 2]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>   <span class="c"># columna (primera dimensión)</span>
<div class="newline"></div><span class="go">array([3, 3])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">x</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<div class="newline"></div><span class="go">(3, 3)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>   <span class="c"># fila (segunda dimensión)</span>
<div class="newline"></div><span class="go">array([2, 4])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<div class="newline"></div><span class="go">(2, 4)</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>El mismo procedimiento para arreglos multidimensionales</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<div class="newline"></div><span class="go">1.14764...</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<div class="newline"></div><span class="go">1.14764...</span>
<div class="newline"></div></pre></div>
</div>
</div>
<p><strong>Otras reducciones</strong> &#8212; funcionan de la misma manera (también <tt class="docutils literal"><span class="pre">axis=</span></tt>)</p>
<ul>
<li><p class="first">Estadística</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<div class="newline"></div><span class="go">1.75</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<div class="newline"></div><span class="go">1.5</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span> <span class="c"># la ultima dimensión</span>
<div class="newline"></div><span class="go">array([ 2.,  5.])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>          <span class="c"># desviación estándar de población (no muestra).</span>
<div class="newline"></div><span class="go">0.82915619758884995</span>
<div class="newline"></div></pre></div>
</div>
</li>
<li><p class="first">Valores extremos</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<div class="newline"></div><span class="go">1</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<div class="newline"></div><span class="go">3</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span>  <span class="c"># índice del valor mínimo</span>
<div class="newline"></div><span class="go">0</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>  <span class="c"># índice del valor máximo</span>
<div class="newline"></div><span class="go">1</span>
<div class="newline"></div></pre></div>
</div>
</li>
<li><p class="first">Operaciones lógicas</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">])</span>
<div class="newline"></div><span class="go">False</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">])</span>
<div class="newline"></div><span class="go">True</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Puede ser usado para comparar arreglos</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">a</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
<div class="newline"></div><span class="go">False</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">a</span> <span class="o">==</span> <span class="n">a</span><span class="p">)</span>
<div class="newline"></div><span class="go">True</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="p">((</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="n">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">b</span> <span class="o">&lt;=</span> <span class="n">c</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<div class="newline"></div><span class="go">True</span>
<div class="newline"></div></pre></div>
</div>
</div>
</li>
<li><p class="first">... y muchos más (mejor para aprender sobre la marcha).</p>
</li>
</ul>
<div class="topic">
<p class="topic-title first">Ejemplo: datos estadísticos</p>
<p>Datos en <a class="reference download internal" href="../../_downloads/populations.txt"><tt class="xref download docutils literal"><span class="pre">populations.txt</span></tt></a> describe las poblaciones de liebres y linces (y zanahorias) en el norte de Canadá durante 20 años.</p>
<p>Primero graficamos los datos</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">datos</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="s">&#39;data/populations.txt&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">year</span><span class="p">,</span> <span class="n">liebres</span><span class="p">,</span> <span class="n">linces</span><span class="p">,</span> <span class="n">zanahorias</span> <span class="o">=</span> <span class="n">datos</span><span class="o">.</span><span class="n">T</span>  <span class="c"># truco: columnas a variables</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>
<div class="newline"></div><span class="go">&lt;matplotlib.axes.Axes object at ...&gt;</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">liebres</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">linces</span><span class="p">,</span> <span class="n">year</span><span class="p">,</span> <span class="n">zanahorias</span><span class="p">)</span>
<div class="newline"></div><span class="go">[&lt;matplotlib.lines.Line2D object at ...&gt;, ...]</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">((</span><span class="s">&#39;Liebre&#39;</span><span class="p">,</span> <span class="s">&#39;Lince&#39;</span><span class="p">,</span> <span class="s">&#39;Zanahoria&#39;</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<div class="newline"></div><span class="go">&lt;matplotlib.legend.Legend object at ...&gt;</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<div class="newline"></div></pre></div>
</div>
<p>[<a class="reference external" href="../../plot_directive/pyplots/numpy_intro_4.py">source code</a>, <a class="reference external" href="../../plot_directive/pyplots/numpy_intro_4.hires.png">hires.png</a>, <a class="reference external" href="../../plot_directive/pyplots/numpy_intro_4.pdf">pdf</a>]</p>
<img alt="../../_images/numpy_intro_4.png" src="../../_images/numpy_intro_4.png" />
<p>La media de cada población son</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">poblaciones</span> <span class="o">=</span> <span class="n">datos</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">poblaciones</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<div class="newline"></div><span class="go">array([ 34080.95238095,  20166.66666667,  42400.        ])</span>
<div class="newline"></div></pre></div>
</div>
<p>Las desviaciones estándar son</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">poblaciones</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<div class="newline"></div><span class="go">array([ 20897.90645809,  16254.59153691,   3322.50622558])</span>
<div class="newline"></div></pre></div>
</div>
<p>Qué especie tiene la mayor población cada año?</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">poblaciones</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<div class="newline"></div><span class="go">array([2, 2, 0, 0, 1, 1, 2, 2, 2, 2, 2, 2, 0, 0, 0, 1, 2, 2, 2, 2, 2])</span>
<div class="newline"></div></pre></div>
</div>
<p>Si no se comprende lo anterior imprimimos los índices:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">fila</span><span class="p">,</span> <span class="n">columna</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">poblaciones</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)):</span>
<div class="newline"></div><span class="gp">... </span>    <span class="k">print</span> <span class="n">fila</span><span class="p">,</span> <span class="n">columna</span>
<div class="newline"></div><span class="gp">...</span>
<div class="newline"></div><span class="go">0 2</span>
<div class="newline"></div><span class="go">1 2</span>
<div class="newline"></div><span class="go">2 0</span>
<div class="newline"></div><span class="go">3 0</span>
<div class="newline"></div><span class="go">4 1</span>
<div class="newline"></div><span class="go">5 1</span>
<div class="newline"></div><span class="go">6 2</span>
<div class="newline"></div><span class="go">7 2</span>
<div class="newline"></div><span class="go">8 2</span>
<div class="newline"></div><span class="go">9 2</span>
<div class="newline"></div><span class="go">10 2</span>
<div class="newline"></div><span class="go">11 2</span>
<div class="newline"></div><span class="go">12 0</span>
<div class="newline"></div><span class="go">13 0</span>
<div class="newline"></div><span class="go">14 0</span>
<div class="newline"></div><span class="go">15 1</span>
<div class="newline"></div><span class="go">16 2</span>
<div class="newline"></div><span class="go">17 2</span>
<div class="newline"></div><span class="go">18 2</span>
<div class="newline"></div><span class="go">19 2</span>
<div class="newline"></div><span class="go">20 2</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="topic">
<p class="topic-title first">Ejemplo: simulación de difusión usando el algoritmo random walk</p>
<img alt="../../_images/random_walk.png" class="align-center" src="../../_images/random_walk.png" />
<p>Cuál es la distancia típica al origen en un recorrido al azar después de <tt class="docutils literal"><span class="pre">t</span></tt> saltos a la derecha o izquierda?</p>
<img alt="../../_images/random_walk_schema.png" class="align-center" src="../../_images/random_walk_schema.png" style="width: 100%;" />
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">numero_recorridos</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c"># número de recorridos</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">tiempo_maximo</span> <span class="o">=</span> <span class="mi">200</span>      <span class="c"># tiempo de duración de cada recorrido</span>
<div class="newline"></div></pre></div>
</div>
<p>Elegimos al azar todos los pasos 1 o -1 del recorrido</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tiempo</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">tiempo_maximo</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">pasos</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random_integers</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">numero_recorridos</span><span class="p">,</span> <span class="n">tiempo_maximo</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pasos</span><span class="p">)</span> <span class="c"># Verificación: todos los pasos son 1 o -1</span>
<div class="newline"></div><span class="go">array([-1,  1])</span>
<div class="newline"></div></pre></div>
</div>
<p>Construimos los recorridos como la suma de los pasos a lo largo del tiempo</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">posiciones</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">pasos</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c"># eje = 1: dimensión tiempo</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">distancias_al_cuadrado</span> <span class="o">=</span> <span class="n">posiciones</span><span class="o">**</span><span class="mi">2</span>
<div class="newline"></div></pre></div>
</div>
<p>Obtenemos la media en el eje de los recorridos</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">media_distancias_al_cuadrado</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">distancias_al_cuadrado</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<div class="newline"></div></pre></div>
</div>
<p>graficamos el resultado</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<div class="newline"></div><span class="go">&lt;matplotlib.figure.Figure object at ...&gt;</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">tiempo</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">media_distancias_al_cuadrado</span><span class="p">),</span> <span class="s">&#39;g.&#39;</span><span class="p">,</span> <span class="n">tiempo</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">tiempo</span><span class="p">),</span> <span class="s">&#39;y-&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">[&lt;matplotlib.lines.Line2D object at ...&gt;, &lt;matplotlib.lines.Line2D object at ...&gt;]</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">r&#39;$tiempo$&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">&lt;matplotlib.text.Text object at ...&gt;</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">r&#39;$\sqrt{\Delta x^{2}}$&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">&lt;matplotlib.text.Text object at ...&gt;</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<div class="newline"></div></pre></div>
</div>
<p>[<a class="reference external" href="../../plot_directive/pyplots/numpy_intro_5.py">source code</a>, <a class="reference external" href="../../plot_directive/pyplots/numpy_intro_5.hires.png">hires.png</a>, <a class="reference external" href="../../plot_directive/pyplots/numpy_intro_5.pdf">pdf</a>]</p>
<img alt="../../_images/numpy_intro_5.png" src="../../_images/numpy_intro_5.png" />
<p>La distancia RMS (raíz media cuadrática) crece como la raíz cuadrada del tiempo!</p>
</div>
</div>
<div class="section" id="broadcasting">
<span id="id1"></span><h2><a class="toc-backref" href="#id4">1.3.2.3. Broadcasting</a><a class="headerlink" href="#broadcasting" title="Enlazar permanentemente con este título">¶</a></h2>
<ul>
<li><p class="first">Operaciones básicas en arreglos <tt class="docutils literal"><span class="pre">numpy</span></tt> (suma, etc) son elemento a elemento.</p>
</li>
<li><p class="first">Esto funciona con arreglos del mismo tamaño.</p>
<p><strong>No obstante!</strong>, también es posible hacer operaciones con matrices de diferentes tamaños si <em>Numpy</em> puede transformar estos arreglos en arreglos del mismo tamaño: esta conversión se llama <strong>broadcasting</strong>.</p>
</li>
</ul>
<p>La siguiente imagen muestra un ejemplo de broadcasting:</p>
<img alt="../../_images/numpy_broadcasting.png" class="align-center" src="../../_images/numpy_broadcasting.png" style="width: 100%;" />
<p>Vamos a verificarlo</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([[ 0,  0,  0],</span>
<div class="newline"></div><span class="go">       [10, 10, 10],</span>
<div class="newline"></div><span class="go">       [20, 20, 20],</span>
<div class="newline"></div><span class="go">       [30, 30, 30]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<div class="newline"></div><span class="go">array([[ 0,  1,  2],</span>
<div class="newline"></div><span class="go">       [10, 11, 12],</span>
<div class="newline"></div><span class="go">       [20, 21, 22],</span>
<div class="newline"></div><span class="go">       [30, 31, 32]])</span>
<div class="newline"></div></pre></div>
</div>
<p>Un truco útil</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">shape</span>
<div class="newline"></div><span class="go">(4,)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>  <span class="c"># adds a new axis -&gt; 2D array</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">shape</span>
<div class="newline"></div><span class="go">(4, 1)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([[ 0],</span>
<div class="newline"></div><span class="go">       [10],</span>
<div class="newline"></div><span class="go">       [20],</span>
<div class="newline"></div><span class="go">       [30]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<div class="newline"></div><span class="go">array([[ 0,  1,  2],</span>
<div class="newline"></div><span class="go">       [10, 11, 12],</span>
<div class="newline"></div><span class="go">       [20, 21, 22],</span>
<div class="newline"></div><span class="go">       [30, 31, 32]])</span>
<div class="newline"></div></pre></div>
</div>
<p>Ya hemos usado broadcasting sin saberlo!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c"># we assign an array of dimension 0 to an array of dimension 1</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([[ 2.,  2.,  2.,  2.,  2.],</span>
<div class="newline"></div><span class="go">       [ 1.,  1.,  1.,  1.,  1.],</span>
<div class="newline"></div><span class="go">       [ 1.,  1.,  1.,  1.,  1.],</span>
<div class="newline"></div><span class="go">       [ 1.,  1.,  1.,  1.,  1.]])</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p class="last">El broadcasting parece un poco mágico, pero en realidad es bastante natural usarlo cuando queremos resolver un problema cuya salida de datos es una matriz con más dimensiones que los datos de entrada.</p>
</div>
<div class="topic">
<p class="topic-title first">Ejemplo</p>
<p>Vamos a construir un arreglo de distancias (en millas) entre las ciudades de la Ruta 66: Chicago, Springfield, Saint-Louis, Tulsa, Oklahoma City, Amarillo, Santa Fe, Albuquerque, Flagstaff y Los Angeles.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mileposts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">198</span><span class="p">,</span> <span class="mi">303</span><span class="p">,</span> <span class="mi">736</span><span class="p">,</span> <span class="mi">871</span><span class="p">,</span> <span class="mi">1175</span><span class="p">,</span> <span class="mi">1475</span><span class="p">,</span> <span class="mi">1544</span><span class="p">,</span>
<div class="newline"></div><span class="gp">... </span>       <span class="mi">1913</span><span class="p">,</span> <span class="mi">2448</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">distance_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">mileposts</span> <span class="o">-</span> <span class="n">mileposts</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">distance_array</span>
<div class="newline"></div><span class="go">array([[   0,  198,  303,  736,  871, 1175, 1475, 1544, 1913, 2448],</span>
<div class="newline"></div><span class="go">       [ 198,    0,  105,  538,  673,  977, 1277, 1346, 1715, 2250],</span>
<div class="newline"></div><span class="go">       [ 303,  105,    0,  433,  568,  872, 1172, 1241, 1610, 2145],</span>
<div class="newline"></div><span class="go">       [ 736,  538,  433,    0,  135,  439,  739,  808, 1177, 1712],</span>
<div class="newline"></div><span class="go">       [ 871,  673,  568,  135,    0,  304,  604,  673, 1042, 1577],</span>
<div class="newline"></div><span class="go">       [1175,  977,  872,  439,  304,    0,  300,  369,  738, 1273],</span>
<div class="newline"></div><span class="go">       [1475, 1277, 1172,  739,  604,  300,    0,   69,  438,  973],</span>
<div class="newline"></div><span class="go">       [1544, 1346, 1241,  808,  673,  369,   69,    0,  369,  904],</span>
<div class="newline"></div><span class="go">       [1913, 1715, 1610, 1177, 1042,  738,  438,  369,    0,  535],</span>
<div class="newline"></div><span class="go">       [2448, 2250, 2145, 1712, 1577, 1273,  973,  904,  535,    0]])</span>
<div class="newline"></div></pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/route66.png"><img alt="../../_images/route66.png" class="align-center" src="../../_images/route66.png" style="width: 342.0px; height: 210.0px;" /></a>
</div>
<p>Una gran cantidad de problemas basados ​​en mallas o redes también puede utilizar broadcasting. Por ejemplo, si queremos calcular la distancia de el origen de los puntos en una cuadrícula de 10x10, se puede hacer</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span>
<div class="newline"></div><span class="go">array([[ 0.        ,  1.        ,  2.        ,  3.        ,  4.        ],</span>
<div class="newline"></div><span class="go">       [ 1.        ,  1.41421356,  2.23606798,  3.16227766,  4.12310563],</span>
<div class="newline"></div><span class="go">       [ 2.        ,  2.23606798,  2.82842712,  3.60555128,  4.47213595],</span>
<div class="newline"></div><span class="go">       [ 3.        ,  3.16227766,  3.60555128,  4.24264069,  5.        ],</span>
<div class="newline"></div><span class="go">       [ 4.        ,  4.12310563,  4.47213595,  5.        ,  5.65685425]])</span>
<div class="newline"></div></pre></div>
</div>
<p>O en colores</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">pcolor</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>    
<div class="newline"></div><span class="go">&lt;matplotlib.collections.PolyCollection object at ...&gt;</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>    
<div class="newline"></div><span class="go">&lt;matplotlib.colorbar.Colorbar instance at ...&gt;</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s">&#39;equal&#39;</span><span class="p">)</span>
<div class="newline"></div><span class="go">(0.0, 200.0, 0.0, 16.0)</span>
<div class="newline"></div></pre></div>
</div>
<p>[<a class="reference external" href="../../plot_directive/pyplots/numpy_intro_6.py">source code</a>, <a class="reference external" href="../../plot_directive/pyplots/numpy_intro_6.hires.png">hires.png</a>, <a class="reference external" href="../../plot_directive/pyplots/numpy_intro_6.pdf">pdf</a>]</p>
<img alt="../../_images/numpy_intro_6.png" src="../../_images/numpy_intro_6.png" />
<p><strong>Observación</strong>: la función <tt class="docutils literal"><span class="pre">numpy.ogrid</span></tt> permite crear directamente vectores x
e y del ejemplo anterior, con dos &#8220;dimensiones significativas&#8221;</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<div class="newline"></div><span class="go">(array([[0],</span>
<div class="newline"></div><span class="go">       [1],</span>
<div class="newline"></div><span class="go">       [2],</span>
<div class="newline"></div><span class="go">       [3],</span>
<div class="newline"></div><span class="go">       [4]]), array([[0, 1, 2, 3, 4]]))</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">shape</span>
<div class="newline"></div><span class="go">((5, 1), (1, 5))</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<p>Por tanto, <tt class="docutils literal"><span class="pre">np.ogrid</span></tt> es muy útil para manejar cálculos sobre una malla. Por otro lado, <tt class="docutils literal"><span class="pre">np.mgrid</span></tt> proporciona directamente matrices llenas de índices para los casos en que no pueda (o no desee hacer) beneficiarse del broadcasting</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<div class="newline"></div><span class="go">array([[0, 0, 0, 0],</span>
<div class="newline"></div><span class="go">       [1, 1, 1, 1],</span>
<div class="newline"></div><span class="go">       [2, 2, 2, 2],</span>
<div class="newline"></div><span class="go">       [3, 3, 3, 3]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<div class="newline"></div><span class="go">array([[0, 1, 2, 3],</span>
<div class="newline"></div><span class="go">       [0, 1, 2, 3],</span>
<div class="newline"></div><span class="go">       [0, 1, 2, 3],</span>
<div class="newline"></div><span class="go">       [0, 1, 2, 3]])</span>
<div class="newline"></div></pre></div>
</div>
<p class="last">Sin embargo, en la práctica, esto casi nunca se necesita!</p>
</div>
</div>
<div class="section" id="manipulando-las-dimensiones-de-un-arreglo">
<h2><a class="toc-backref" href="#id5">1.3.2.4. Manipulando las dimensiones de un arreglo</a><a class="headerlink" href="#manipulando-las-dimensiones-de-un-arreglo" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="aplanado">
<h3>1.3.2.4.1. Aplanado<a class="headerlink" href="#aplanado" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<div class="newline"></div><span class="go">array([1, 2, 3, 4, 5, 6])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">T</span>
<div class="newline"></div><span class="go">array([[1, 4],</span>
<div class="newline"></div><span class="go">    [2, 5],</span>
<div class="newline"></div><span class="go">    [3, 6]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<div class="newline"></div><span class="go">array([1, 4, 2, 5, 3, 6])</span>
<div class="newline"></div></pre></div>
</div>
<p>Dimensiones superiores: las últimos dimensiones son las &#8220;primeras&#8221;.</p>
</div>
<div class="section" id="reshaping">
<h3>1.3.2.4.2. Reshaping<a class="headerlink" href="#reshaping" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La operación inversa a aplanar</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">shape</span>
<div class="newline"></div><span class="go">(2, 3)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<div class="newline"></div><span class="go">array([[1, 2, 3],</span>
<div class="newline"></div><span class="go">       [4, 5, 6]])</span>
<div class="newline"></div></pre></div>
</div>
<p>O,</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">reshape</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>    <span class="c"># unspecified (-1) value is inferred</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last"><tt class="docutils literal"><span class="pre">ndarray.reshape</span></tt> <strong>puede</strong> devolver una vista (cf <tt class="docutils literal"><span class="pre">help(np.reshape)</span></tt>)), o copia</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Truco</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">99</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([99,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,</span>
<div class="newline"></div><span class="go">       17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,</span>
<div class="newline"></div><span class="go">       34, 35])</span>
<div class="newline"></div></pre></div>
</div>
<p>Cuidado: reshape también pueden devolver una copia!</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">9</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([[ 0.,  0.],</span>
<div class="newline"></div><span class="go">       [ 0.,  0.],</span>
<div class="newline"></div><span class="go">       [ 0.,  0.]])</span>
<div class="newline"></div></pre></div>
</div>
<p class="last">Para entender, consulte la sección sobre :ref: <tt class="xref py py-obj docutils literal"><span class="pre">el</span> <span class="pre">diseño</span> <span class="pre">de</span> <span class="pre">memoria</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">arreglo</span></tt> más abajo.</p>
</div>
</div>
<div class="section" id="agregando-una-dimension">
<h3>1.3.2.4.3. Agregando una dimensión<a class="headerlink" href="#agregando-una-dimension" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Indexando con el objeto <tt class="docutils literal"><span class="pre">np.newaxis</span></tt> nos permite agregar un eje a un arreglo</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span>
<div class="newline"></div><span class="go">array([1, 2, 3])</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="p">[:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]</span>
<div class="newline"></div><span class="go">array([[1],</span>
<div class="newline"></div><span class="go">       [2],</span>
<div class="newline"></div><span class="go">       [3]])</span>
<div class="newline"></div>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">,</span> <span class="p">:]</span>
<div class="newline"></div><span class="go">array([[1, 2, 3]])</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="section" id="cambiando-dimensiones">
<h3>1.3.2.4.4. Cambiando dimensiones<a class="headerlink" href="#cambiando-dimensiones" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="mi">3</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">shape</span>
<div class="newline"></div><span class="go">(4, 3, 2)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<div class="newline"></div><span class="go">5</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">shape</span>
<div class="newline"></div><span class="go">(3, 2, 4)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<div class="newline"></div><span class="go">5</span>
<div class="newline"></div></pre></div>
</div>
<p>También crea una vista</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<div class="newline"></div><span class="go">-1</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="section" id="resizing">
<h3>1.3.2.4.5. Resizing<a class="headerlink" href="#resizing" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El tamaño de un arreglo se puede cambiar con <tt class="docutils literal"><span class="pre">ndarray.resize</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">8</span><span class="p">,))</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([0, 1, 2, 3, 0, 0, 0, 0])</span>
<div class="newline"></div></pre></div>
</div>
<p>Sin embargo, no debe ser referenciado a otro objeto:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">4</span><span class="p">,))</span>   
<div class="newline"></div><span class="gt">Traceback (most recent call last):</span>
<div class="newline"></div>  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<div class="newline"></div><span class="gr">ValueError</span>: <span class="n">cannot resize an array that has been referenced or is</span>
<div class="newline"></div><span class="go">referencing another array in this way.  Use the resize function</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="section" id="algunos-ejemplos-del-mundo-real">
<h3>1.3.2.4.6. Algunos ejemplos del mundo real<a class="headerlink" href="#algunos-ejemplos-del-mundo-real" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="topic">
<p class="topic-title first">Caso 2.a: Llamando código (legado) Fortran</p>
<p>Funciones y rutinas no Python. Por ejemplo, Fortran</p>
<div class="highlight-fortran"><div class="highlight"><pre><span class="c">! 2_a_fortran_module.f90</span>
<div class="newline"></div><span class="k">subroutine </span><span class="nv">some_function</span><span class="p">(</span><span class="nv">n</span><span class="p">,</span> <span class="nv">a</span><span class="p">,</span> <span class="nv">b</span><span class="p">)</span>
<div class="newline"></div>  <span class="kt">integer</span> <span class="kd">::</span> <span class="nv">n</span>
<div class="newline"></div>  <span class="kt">double precision</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">n</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="nv">in</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">a</span>
<div class="newline"></div>  <span class="kt">double precision</span><span class="p">,</span> <span class="k">dimension</span><span class="p">(</span><span class="nv">n</span><span class="p">),</span> <span class="k">intent</span><span class="p">(</span><span class="nv">out</span><span class="p">)</span> <span class="kd">::</span> <span class="nv">b</span>
<div class="newline"></div>  <span class="nv">b</span> <span class="o">=</span> <span class="nv">a</span> <span class="o">+</span> <span class="mi">1</span>
<div class="newline"></div><span class="k">end subroutine </span><span class="nv">some_function</span>
<div class="newline"></div></pre></div>
</div>
<p>Podemos utilizar f2py para envolver código Fortran en Python:
<tt class="docutils literal"><span class="pre">f2py</span> <span class="pre">-c</span> <span class="pre">-m</span> <span class="pre">fortran_module</span> <span class="pre">2_a_fortran_module.f90</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<div class="newline"></div><span class="kn">import</span> <span class="nn">fortran_module</span>
<div class="newline"></div>
<div class="newline"></div><span class="k">def</span> <span class="nf">some_function</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
<div class="newline"></div>    <span class="sd">&quot;&quot;&quot;</span>
<div class="newline"></div><span class="sd">    Call a Fortran routine, and preserve input shape</span>
<div class="newline"></div><span class="sd">    &quot;&quot;&quot;</span>
<div class="newline"></div>    <span class="nb">input</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">input</span><span class="p">)</span>
<div class="newline"></div>    <span class="c"># fortran_module.some_function() takes 1-D arrays!</span>
<div class="newline"></div>    <span class="n">output</span> <span class="o">=</span> <span class="n">fortran_module</span><span class="o">.</span><span class="n">some_function</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">ravel</span><span class="p">())</span>
<div class="newline"></div>    <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<div class="newline"></div>
<div class="newline"></div><span class="k">print</span> <span class="n">some_function</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]))</span>
<div class="newline"></div><span class="k">print</span> <span class="n">some_function</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]]))</span>
<div class="newline"></div>
<div class="newline"></div><span class="c"># -&gt;</span>
<div class="newline"></div><span class="c"># [ 2.  3.  4.]</span>
<div class="newline"></div><span class="c"># [[ 2.  3.]</span>
<div class="newline"></div><span class="c">#  [ 4.  5.]]</span>
<div class="newline"></div></pre></div>
</div>
</div>
<div class="topic">
<p class="topic-title first">Caso 2.b: Bloques de matrices y vectores (y tensores)</p>
<p>Vector espacio: nivel cuántico <img class="math" src="../../_images/math/b88c462e5d9319a7d2181ad94863658fa0a24736.png" alt="\otimes" style="vertical-align: -3px"/> spin</p>
<div class="math">
<p><img src="../../_images/math/d08f2718c597cbba158a44a4fc825136bec60a69.png" alt="\check{\psi}
=
\begin{pmatrix}
\hat{\psi}_1 \\ \hat{\psi}_2
\end{pmatrix}
\,,
\qquad
\hat{\psi}_{1} =
\begin{pmatrix}
  \psi_{1\uparrow} \\ \psi_{1\downarrow}
\end{pmatrix}
\qquad
\hat{\psi}_{2} =
\begin{pmatrix}
  \psi_{2\uparrow} \\ \psi_{2\downarrow}
\end{pmatrix}"/></p>
</div><p>En resumen: para <strong>bloques de matrices y vectores</strong>, puede ser útil preservar la <strong>estructura de bloque</strong>.</p>
<p>En Numpy</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">psi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>   <span class="c"># dimensions: level, spin</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">psi</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="c"># &lt;-- psi_{1,downarrow}</span>
<div class="newline"></div><span class="go">0.0</span>
<div class="newline"></div></pre></div>
</div>
<p>Los operadores lineales en tales bloques de vectores tienen una estructura de bloques similar:</p>
<div class="math">
<p><img src="../../_images/math/e6fa373bfd92f7d3e8f9543fea328d3240254df1.png" alt="\check{H} = \begin{pmatrix}
\hat{h}_{11} &amp; \hat{V} \\
\hat{V}^\dagger &amp; \hat{h}_{22} \\
\end{pmatrix}
\,,
\qquad
\hat{h}_{11}
=
\begin{pmatrix}
\epsilon_{1,\uparrow}
&amp; 0
\\
0 &amp; \epsilon_{1,\downarrow}
\end{pmatrix}
\,,
\qquad
\ldots"/></p>
</div><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">H</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="c"># dimensions: level1, level2, spin1, spin2</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">h_11</span> <span class="o">=</span> <span class="n">H</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,:,:]</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">V</span> <span class="o">=</span> <span class="n">H</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<div class="newline"></div></pre></div>
</div>
<p>Para hacer el producto matricial: nos deshacemos de la estructura de bloques, hacemos el producto de la matriz 4x4, a continuación de nuevo</p>
<div class="math">
<p><img src="../../_images/math/ea2a09651649a8aba90002fa152b91e59ff3c1d7.png" alt="\check{H}\check{\psi}"/></p>
</div><div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">mdot</span><span class="p">(</span><span class="n">operator</span><span class="p">,</span> <span class="n">psi</span><span class="p">):</span>
<div class="newline"></div><span class="gp">... </span>    <span class="k">return</span> <span class="n">operator</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span>
<div class="newline"></div><span class="gp">... </span>               <span class="n">psi</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<div class="newline"></div></pre></div>
</div>
<p>Es decir, cambiamos el orden de las dimensiones primero a <tt class="docutils literal"><span class="pre">level1,</span> <span class="pre">spin1,</span> <span class="pre">level2,</span> <span class="pre">spin2</span></tt> y luego reshape =&gt; producto matriz correcto.</p>
</div>
</div>
</div>
<div class="section" id="ordenando-datos">
<h2><a class="toc-backref" href="#id6">1.3.2.5. Ordenando datos</a><a class="headerlink" href="#ordenando-datos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ordenando a lo largo de un eje</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<div class="newline"></div><span class="go">array([[3, 4, 5],</span>
<div class="newline"></div><span class="go">       [1, 1, 2]])</span>
<div class="newline"></div></pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Ordena filas y columnas por separado!</p>
</div>
<p>Ordenar y reemplazar</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<div class="newline"></div><span class="go">array([[3, 4, 5],</span>
<div class="newline"></div><span class="go">       [1, 1, 2]])</span>
<div class="newline"></div></pre></div>
</div>
<p>Ordenar con indexado fancy</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">j</span>
<div class="newline"></div><span class="go">array([2, 3, 1, 0])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
<div class="newline"></div><span class="go">array([1, 2, 3, 4])</span>
<div class="newline"></div></pre></div>
</div>
<p>Buscando los valores mínimos y máximos</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">j_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">j_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<div class="newline"></div><span class="gp">&gt;&gt;&gt; </span><span class="n">j_max</span><span class="p">,</span> <span class="n">j_min</span>
<div class="newline"></div><span class="go">(0, 2)</span>
<div class="newline"></div></pre></div>
</div>
<div class="green topic">
<p class="topic-title first"><strong>Ejercicio: Ordenado</strong></p>
<ul class="simple">
<li>Pruebe creando una copia y sin crear una copia.</li>
<li>Trate de crear arreglos con diferentes dtypes y ordenarlos.</li>
<li>Utilice <tt class="docutils literal"><span class="pre">all</span></tt> o <tt class="docutils literal"><span class="pre">array_equal</span></tt> para comprobar los resultados.</li>
<li>Pruebe <tt class="docutils literal"><span class="pre">np.random.shuffle</span></tt> una manera de crear entradas para ordenar más rápido.</li>
<li>Combine <tt class="docutils literal"><span class="pre">ravel</span></tt>, <tt class="docutils literal"><span class="pre">sort</span></tt> y <tt class="docutils literal"><span class="pre">reshape</span></tt>.</li>
<li>Revise la palabra clave <tt class="docutils literal"><span class="pre">axis</span></tt> para <tt class="docutils literal"><span class="pre">sort</span></tt> y reescriba el ejercicio anterior.</li>
</ul>
</div>
</div>
<div class="section" id="resumen">
<h2><a class="toc-backref" href="#id7">1.3.2.6. Resumen</a><a class="headerlink" href="#resumen" title="Enlazar permanentemente con este título">¶</a></h2>
<p><strong>Qué es lo necesita saber para empezar?</strong></p>
<ul class="simple">
<li>Saber cómo crear arreglos: <tt class="docutils literal"><span class="pre">array</span></tt>, <tt class="docutils literal"><span class="pre">arange</span></tt>, <tt class="docutils literal"><span class="pre">ones</span></tt>, <tt class="docutils literal"><span class="pre">zeros</span></tt>.</li>
<li>Obtener la dimensión de un arreglo con <tt class="docutils literal"><span class="pre">array.shape</span></tt>, usar el segmentado para obtener diferentes vistas de un arreglo: <tt class="docutils literal"><span class="pre">array</span> <span class="pre">[::</span> <span class="pre">2]</span></tt>, etc. Cambiar la dimensión de la matriz mediante <tt class="docutils literal"><span class="pre">reshape</span></tt> o aplanarla con <tt class="docutils literal"><span class="pre">ravel</span></tt>.</li>
<li>Obtener un subconjunto de los elementos de un arreglo y/o modificar sus valores con máscaras</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">a</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<div class="newline"></div></pre></div>
</div>
<ul class="simple">
<li>Conocer las operaciones misceláneas con arreglos, como la búsqueda de la media o el valor máximo (<tt class="docutils literal"><span class="pre">array.mean()</span></tt>, <tt class="docutils literal"><span class="pre">array.max()</span></tt>). No hay necesidad de saberlo todo, solo busque en la documentación (documentación en línea, <tt class="docutils literal"><span class="pre">help()</span></tt>, <tt class="docutils literal"><span class="pre">lookfor()</span></tt>)!!</li>
<li>Para uso avanzado: dominar el indexado con arreglos de enteros, así como broadcasting. Conocer más funciones para manejar varias operaciones con arreglos Numpy.</li>
</ul>
<p><div style="clear: both"></div></p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="elaborate_arrays.html" title="1.3.3. Arreglos más elaborados"
             >siguiente</a></li>
        <li class="right" >
          <a href="array_object.html" title="1.3.1. El objeto array numpy"
             >anterior</a> |</li>
        <li><a href="../../index.html">Scipy lecture notes</a> &raquo;</li>
          <li><a href="../index.html" >1. Iniciandose en computación científica con Python</a> &raquo;</li>
          <li><a href="index.html" >1.3. NumPy: creación y manipulación de datos numéricos</a> &raquo;</li>
     
    <!-- Insert a menu in the navigation bar -->
    <li class="left">
	<!-- On click toggle the 'tip' on or off-->
	<a onclick="$('.tip').each(function (index, obj) {
			    collapse_tip_div(obj);
		    });
		    $('.tip').addClass('collapsed');
		    $('.left').addClass('transparent');">
	<img src="../../_static/minus.png"
         alt="Collapse to compact view" style="padding: 1ex;"/>
	<span class="hiddenlink">Collapse document to compact view</span>
    </a></li>

      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012,2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>